<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>clojure.java.jmx - JMX Interface 0.3.4 API documentation</title>
    <link rel="icon" href="static/favicon.png" />
    <link rel="shortcut icon" href="static/favicon.png" />
    <link rel="stylesheet" href="static/clojure.css" type="text/css" media="all" />
    <link rel="stylesheet" href="static/wiki.css" type="text/css" media="all" />
    <link rel="stylesheet" href="static/internal.css" type="text/css" media="all" />
    <style>.menuWrapper{height: 36px;}</style>
  </head>
<!--
This document was auto-generated from the source by the clojure autodoc system.
To report errors or ask questions about the overall documentation structure, formatting,
etc., contact Tom Faulhaber (google mail name: tomfaulhaber).
For errors in the documentation of a particular namespace, contact the author of that
namespace.
-->
  <body>
    <div id="AllContentContainer">
      <div id="Header">
	<a href="index.html" id="Logo"><img src="static/clojure-icon.gif" width="100" height="100" alt="Clojure" /></a>
	<h1><a href="index.html" id="page-header" title="page header title">java.jmx API Reference</a></h1>
      </div>
      <div id="leftcolumn"><div style="text-align: center;"></div>
<div class="menu">
  <div class="WikiCustomNav WikiElement wiki">
    <span class="toc-header"><span id="project-name">JMX Interface</span> <span id="version">0.3.4</span> API</span><br />
    <ul>
      <li><a href="index.html" class="wiki_link">Overview</a></li>
      <li><a href="api-index.html" class="wiki_link">API Index</a></li>
    </ul>
    
    
    <a class="wiki_link" href="http://clojure.org">Clojure Home</a>
  </div>
</div>
</div>
      <div id="rightcolumn">
	<div id="Content">
	  <div class="contentBox"><div class="innerContentBox">
              <div class="wiki wikiPage" id="content_view">
                <div id="right-sidebar"><div id="toc">
  <h1 class="nopad">Table of Contents</h1>
  <div class="toc-section" style="margin-left: 1em;">
    <a style="margin-top: 3px;" href="#toc0">Overview</a>
    
  </div><div class="toc-section" style="margin-left: 1em;">
    <a style="margin-top: 3px;" href="#proto-section">Protocols</a>
    <div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.java.jmx/Destract" class="toc-entry-anchor">Destract</a>
      <div class="toc-subentry" style="margin-left: 1em;">
        <a href="#clojure.java.jmx/objects-&gt;data" class="toc-subentry-anchor">objects-&gt;data</a>
      </div>
    </div>
  </div><div class="toc-section" style="margin-left: 1em;">
    <a style="margin-top: 3px;" href="#type-section">Types</a>
    <div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.java.jmx/Bean" class="toc-entry-anchor">Bean</a>
      
    </div>
  </div><div class="toc-section" style="margin-left: 1em;">
    <a style="margin-top: 3px;" href="#var-section">Vars and Functions</a>
    <div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.java.jmx/-&gt;Bean" class="toc-entry-anchor">-&gt;Bean</a>
      
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.java.jmx/attribute-names" class="toc-entry-anchor">attribute-names</a>
      
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.java.jmx/create-bean" class="toc-entry-anchor">create-bean</a>
      
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.java.jmx/invoke" class="toc-entry-anchor">invoke</a>
      
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.java.jmx/invoke-signature" class="toc-entry-anchor">invoke-signature</a>
      
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.java.jmx/mbean" class="toc-entry-anchor">mbean</a>
      
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.java.jmx/mbean-names" class="toc-entry-anchor">mbean-names</a>
      
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.java.jmx/operation-names" class="toc-entry-anchor">operation-names</a>
      
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.java.jmx/read" class="toc-entry-anchor">read</a>
      
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.java.jmx/readable?" class="toc-entry-anchor">readable?</a>
      
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.java.jmx/register-mbean" class="toc-entry-anchor">register-mbean</a>
      
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.java.jmx/unregister-mbean" class="toc-entry-anchor">unregister-mbean</a>
      
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.java.jmx/with-connection" class="toc-entry-anchor">with-connection</a>
      
    </div><div class="toc-entry" style="margin-left: 1em;">
      <a href="#clojure.java.jmx/write!" class="toc-entry-anchor">write!</a>
      
    </div>
  </div><div class="toc-section" style="margin-left: 1em;">
    <a style="margin-top: 3px;" href="#"></a>
    
  </div>
</div>
</div>
                <div id="content-tag"><h1 id="overview">API for <span id="clojure.java.jmx">clojure.java.jmx</span>
  - <span id="header-project">JMX Interface</span> <span id="header-version">0.3.4</span><span id="header-status-block"> (<span id="header-status">in development</span>)</span>
  </h1>
<span id="author-line">by <span id="author-name">Stuart Halloway</span><br /></span>
<br />Full namespace name: <span id="long-name">clojure.java.jmx</span>
<p></p>
<h2>Overview</h2>
<div id="home-page">Project home page is <a href="http://github.com/clojure/java.jmx/">http://github.com/clojure/java.jmx/</a></div>
<pre id="namespace-docstr">JMX support for Clojure

Usage
  (require '[clojure.java.jmx :as jmx])

What beans do I have?

  (jmx/mbean-names "*:*")
  -&gt; #&lt;HashSet [java.lang:type=MemoryPool,name=CMS Old Gen,
                java.lang:type=Memory, ...]

What attributes does a bean have?

  (jmx/attribute-names "java.lang:type=Memory")
  -&gt; (:Verbose :ObjectPendingFinalizationCount
      :HeapMemoryUsage :NonHeapMemoryUsage)

What is the value of an attribute?

  (jmx/read "java.lang:type=Memory" :ObjectPendingFinalizationCount)
  -&gt; 0
  (jmx/read "java.lang:type=Memory" [:HeapMemoryUsage :NonHeapMemoryUsage])
  -&gt;
  {:NonHeapMemoryUsage
    {:used 16674024, :max 138412032, :init 24317952, :committed 24317952},
   :HeapMemoryUsage
    {:used 18619064, :max 85393408, :init 0, :committed 83230720}}

Can't I just have *all* the attributes in a Clojure map?

  (jmx/mbean "java.lang:type=Memory")
  -&gt; {:NonHeapMemoryUsage
       {:used 16674024, :max 138412032, :init 24317952, :committed 24317952},
      :HeapMemoryUsage
       {:used 18619064, :max 85393408, :init 0, :committed 83230720},
      :ObjectPendingFinalizationCount 0,
      :Verbose false}

Can I find and invoke an operation?

  (jmx/operation-names "java.lang:type=Memory")
  -&gt; (:gc)
  (jmx/invoke "java.lang:type=Memory" :gc)
  -&gt; nil

What about some other process? Just run *any* of the above code
inside a with-connection:

  (jmx/with-connection {:host "localhost", :port 3000}
    (jmx/mbean "java.lang:type=Memory"))
  -&gt; {:ObjectPendingFinalizationCount 0,
      :HeapMemoryUsage ... etc.}

Can I serve my own beans?  Sure, just drop a Clojure ref
into an instance of clojure.java.jmx.Bean, and the bean
will expose read-only attributes for every key/value pair
in the ref:

  (jmx/register-mbean
     (create-bean
     (ref {:string-attribute "a-string"}))
     "my.namespace:name=Value")</pre>


<br />

<div id="proto-section">
  <p></p>
  <h2>Protocols</h2>
  <div id="proto-entry">
    <br />
    <hr />
    <h2 id="clojure.java.jmx/Destract">Destract</h2>
    <span id="proto-type">Protocol</span><br />
    <pre id="proto-docstr"></pre>
    Known implementations: <span id="proto-impls">clojure.lang.Associative, java.lang.Boolean, javax.management.openmbean.CompositeData, javax.management.openmbean.TabularData, nil, Object</span>
    <div id="proto-var-entry">
      <br />
      <h3 id="clojure.java.jmx/objects-&gt;data">objects-&gt;data</h3>
      <span id="var-type">function</span><br />
      <pre id="var-usage">Usage: (objects-&gt;data _)
</pre>
      <pre id="var-docstr">Convert JMX object model into data. Handles CompositeData, TabularData, maps, and atoms.</pre>
      <pre id="var-specs"></pre>
      
      
      
    </div>
    
    
    <a id="proto-source" href="https://github.com/clojure/java.jmx/blob/f7fad3b9d8a376d3d7efe2b7cfcacc5b1ec5e585/src/main/clojure/clojure/java/jmx.clj#L129">Source</a>
  </div>
</div>
<div id="type-section">
  <p></p>
  <h2>Types</h2>
  <div id="type-entry">
    <br />
    <hr />
    <h2 id="clojure.java.jmx/Bean">Bean</h2>
    <span id="type-type">type</span><br />
    <pre id="type-docstr"></pre>
    Fields: <span id="type-fields">[state-ref]</span><br />
    Protocols: <span id="type-protocols"></span><br />
    Interfaces: <span id="type-interfaces">javax.management.DynamicMBean</span><br />
  </div>
</div>
<div id="var-section">
  <p></p>
  <h2>Public Variables and Functions</h2>
  <div id="var-entry">
    <br />
    <hr />
    <h2 id="clojure.java.jmx/-&gt;Bean">-&gt;Bean</h2>
    <span id="var-type">function</span><br />
    <pre id="var-usage">Usage: (-&gt;Bean state-ref)
</pre>
    <pre id="var-docstr">Positional factory function for class clojure.java.jmx.Bean.</pre>
    <pre id="var-specs"></pre>
    
    
    <a id="var-source" href="https://github.com/clojure/java.jmx/blob/f7fad3b9d8a376d3d7efe2b7cfcacc5b1ec5e585/src/main/clojure/clojure/java/jmx.clj#L335">Source</a>
  </div><div id="var-entry">
    <br />
    <hr />
    <h2 id="clojure.java.jmx/attribute-names">attribute-names</h2>
    <span id="var-type">function</span><br />
    <pre id="var-usage">Usage: (attribute-names n)
</pre>
    <pre id="var-docstr">All attribute names available on an MBean.</pre>
    <pre id="var-specs"></pre>
    
    
    <a id="var-source" href="https://github.com/clojure/java.jmx/blob/f7fad3b9d8a376d3d7efe2b7cfcacc5b1ec5e585/src/main/clojure/clojure/java/jmx.clj#L292">Source</a>
  </div><div id="var-entry">
    <br />
    <hr />
    <h2 id="clojure.java.jmx/create-bean">create-bean</h2>
    <span id="var-type">function</span><br />
    <pre id="var-usage">Usage: (create-bean state-ref)
</pre>
    <pre id="var-docstr">Expose a reference as a JMX bean. state-ref should be a Clojure
reference (ref, atom, agent) containing a map.

Using an agent for the state-ref is not recommended when the bean may
be modified with the setAttribute(s) methods. The setAttribute(s) methods
will block on the agent to complete all submitted actions (via await).</pre>
    <pre id="var-specs"></pre>
    
    
    <a id="var-source" href="https://github.com/clojure/java.jmx/blob/f7fad3b9d8a376d3d7efe2b7cfcacc5b1ec5e585/src/main/clojure/clojure/java/jmx.clj#L374">Source</a>
  </div><div id="var-entry">
    <br />
    <hr />
    <h2 id="clojure.java.jmx/invoke">invoke</h2>
    <span id="var-type">function</span><br />
    <pre id="var-usage">Usage: (invoke n op &amp; args)
</pre>
    <pre id="var-docstr">Invoke an operation an an MBean. See also: invoke-signature</pre>
    <pre id="var-specs"></pre>
    
    
    <a id="var-source" href="https://github.com/clojure/java.jmx/blob/f7fad3b9d8a376d3d7efe2b7cfcacc5b1ec5e585/src/main/clojure/clojure/java/jmx.clj#L322">Source</a>
  </div><div id="var-entry">
    <br />
    <hr />
    <h2 id="clojure.java.jmx/invoke-signature">invoke-signature</h2>
    <span id="var-type">function</span><br />
    <pre id="var-usage">Usage: (invoke-signature n op signature &amp; args)
</pre>
    <pre id="var-docstr">Invoke an operation an an MBean. You must also supply
the signature of the operation. This is useful in cases
where the operation is overloaded. Otherwise you should
use the 'invoke' operation which will determine the
signature for you.

The signature parameter is a sequence of strings that
describes the method parameter types in order.</pre>
    <pre id="var-specs"></pre>
    
    
    <a id="var-source" href="https://github.com/clojure/java.jmx/blob/f7fad3b9d8a376d3d7efe2b7cfcacc5b1ec5e585/src/main/clojure/clojure/java/jmx.clj#L305">Source</a>
  </div><div id="var-entry">
    <br />
    <hr />
    <h2 id="clojure.java.jmx/mbean">mbean</h2>
    <span id="var-type">function</span><br />
    <pre id="var-usage">Usage: (mbean n)
</pre>
    <pre id="var-docstr">Like clojure.core/bean, but for JMX beans. Returns a read-only map of
a JMX bean's attributes. If an attribute it not supported, value is
set to the exception thrown.</pre>
    <pre id="var-specs"></pre>
    
    
    <a id="var-source" href="https://github.com/clojure/java.jmx/blob/f7fad3b9d8a376d3d7efe2b7cfcacc5b1ec5e585/src/main/clojure/clojure/java/jmx.clj#L327">Source</a>
  </div><div id="var-entry">
    <br />
    <hr />
    <h2 id="clojure.java.jmx/mbean-names">mbean-names</h2>
    <span id="var-type">function</span><br />
    <pre id="var-usage">Usage: (mbean-names n)
</pre>
    <pre id="var-docstr">Finds all MBeans matching a name on the current *connection*.</pre>
    <pre id="var-specs"></pre>
    
    
    <a id="var-source" href="https://github.com/clojure/java.jmx/blob/f7fad3b9d8a376d3d7efe2b7cfcacc5b1ec5e585/src/main/clojure/clojure/java/jmx.clj#L287">Source</a>
  </div><div id="var-entry">
    <br />
    <hr />
    <h2 id="clojure.java.jmx/operation-names">operation-names</h2>
    <span id="var-type">function</span><br />
    <pre id="var-usage">Usage: (operation-names n)
</pre>
    <pre id="var-docstr">All operation names available on an MBean.</pre>
    <pre id="var-specs"></pre>
    
    
    <a id="var-source" href="https://github.com/clojure/java.jmx/blob/f7fad3b9d8a376d3d7efe2b7cfcacc5b1ec5e585/src/main/clojure/clojure/java/jmx.clj#L299">Source</a>
  </div><div id="var-entry">
    <br />
    <hr />
    <h2 id="clojure.java.jmx/read">read</h2>
    <span id="var-type">var</span><br />
    <pre id="var-usage"></pre>
    <pre id="var-docstr">Read one or more mbean properties.</pre>
    <pre id="var-specs"></pre>
    
    
    <a id="var-source" href="https://github.com/clojure/java.jmx/blob/f7fad3b9d8a376d3d7efe2b7cfcacc5b1ec5e585/src/main/clojure/clojure/java/jmx.clj#L224">Source</a>
  </div><div id="var-entry">
    <br />
    <hr />
    <h2 id="clojure.java.jmx/readable?">readable?</h2>
    <span id="var-type">function</span><br />
    <pre id="var-usage">Usage: (readable? n attr)
</pre>
    <pre id="var-docstr">Is attribute readable?</pre>
    <pre id="var-specs"></pre>
    
    
    <a id="var-source" href="https://github.com/clojure/java.jmx/blob/f7fad3b9d8a376d3d7efe2b7cfcacc5b1ec5e585/src/main/clojure/clojure/java/jmx.clj#L254">Source</a>
  </div><div id="var-entry">
    <br />
    <hr />
    <h2 id="clojure.java.jmx/register-mbean">register-mbean</h2>
    <span id="var-type">function</span><br />
    <pre id="var-usage">Usage: (register-mbean mbean mbean-name)
</pre>
    <pre id="var-docstr">Register an mbean with the current *connection*.</pre>
    <pre id="var-specs"></pre>
    
    
    <a id="var-source" href="https://github.com/clojure/java.jmx/blob/f7fad3b9d8a376d3d7efe2b7cfcacc5b1ec5e585/src/main/clojure/clojure/java/jmx.clj#L277">Source</a>
  </div><div id="var-entry">
    <br />
    <hr />
    <h2 id="clojure.java.jmx/unregister-mbean">unregister-mbean</h2>
    <span id="var-type">function</span><br />
    <pre id="var-usage">Usage: (unregister-mbean mbean-name)
</pre>
    <pre id="var-docstr">Unregister mbean named mbean-name with the current *connection*.</pre>
    <pre id="var-specs"></pre>
    
    
    <a id="var-source" href="https://github.com/clojure/java.jmx/blob/f7fad3b9d8a376d3d7efe2b7cfcacc5b1ec5e585/src/main/clojure/clojure/java/jmx.clj#L282">Source</a>
  </div><div id="var-entry">
    <br />
    <hr />
    <h2 id="clojure.java.jmx/with-connection">with-connection</h2>
    <span id="var-type">macro</span><br />
    <pre id="var-usage">Usage: (with-connection opts &amp; body)
</pre>
    <pre id="var-docstr">Execute body with a JMX connection created based on opts. opts can include [default]:

:host        The host to connect to [localhost]
:port        The port to connect to [3000]
:jndi-path   The jndi-path to use [jmxuri]
:url         The full url (as a String) to use instead of generating a rmi url from
             the above options [nil]
:environment A map representing the environment used for the connection.
             See JMXConnectorFactory/connect for details [{}]</pre>
    <pre id="var-specs"></pre>
    
    
    <a id="var-source" href="https://github.com/clojure/java.jmx/blob/f7fad3b9d8a376d3d7efe2b7cfcacc5b1ec5e585/src/main/clojure/clojure/java/jmx.clj#L187">Source</a>
  </div><div id="var-entry">
    <br />
    <hr />
    <h2 id="clojure.java.jmx/write!">write!</h2>
    <span id="var-type">function</span><br />
    <pre id="var-usage">Usage: (write! n attr value)
</pre>
    <pre id="var-docstr">Write an attribute value.</pre>
    <pre id="var-specs"></pre>
    
    
    <a id="var-source" href="https://github.com/clojure/java.jmx/blob/f7fad3b9d8a376d3d7efe2b7cfcacc5b1ec5e585/src/main/clojure/clojure/java/jmx.clj#L239">Source</a>
  </div>
</div>


</div>
              </div>
            </div>
          </div>
	</div>
	<div id="foot">
	  <div id="copyright" style="text-align: center;">Copyright 2007-2017 by Rich Hickey and the various contributors</div>
	</div>
      </div>
      <div id="DesignedBy">Logo &amp; site design by <a href="http://www.tomhickey.com" title="Visit Tom Hickey's website.">Tom Hickey</a>.<br />
      Clojure auto-documentation system by Tom Faulhaber.</div>
    </div>
    <!-- /AllContentContainer -->
  </body>

</html>